<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

    <h:panelGroup id="SendMessagePanel" styleClass="centr_div">
        <rich:panel header="#{i18n['feedback.form.header']}" style="width: 600px" rendered="#{user.isLoggedIn and not message.isProcessed}">
            <h:panelGroup style="text-align: left">
                <rich:messages style="color:red; line-height: 200%;" id="errorMessages" layout="list" ajaxRendered="true" />
            </h:panelGroup>
            <h:form id="SendMessageForm">
                <h:outputText value="#{i18n['feedback.form.message.title']}" />
                <br />
                <h:inputText value="#{message.title}" size="30" id="title" tabindex="0" required="true">
                    <rich:validator />
                </h:inputText>
                <br />
                <h:outputText value="#{i18n['feedback.form.message.body']}" />
                <br />
                <h:inputTextarea cols="70" rows="7" value="#{message.message}" id="message" required="true">
                    <rich:validator />
                </h:inputTextarea>
                <br />
                <a4j:commandButton id="submitButton" value="#{i18n['feedback.form.button.send']}" type="submit"
                    onclick="this.disabled=true"
                    oncomplete="document.getElementById('SendMessageForm:submitButton').disabled=false"
                    action="#{message.sendFeedbackMessage}"
                    render="SendMessagePanel, MessageSuccessfullySent, LoggedOut" />
            </h:form>
        </rich:panel>
    </h:panelGroup>
    <script type="text/javascript">
        document.getElementById("SendMessageForm:title").focus();
    </script>
</ui:composition>